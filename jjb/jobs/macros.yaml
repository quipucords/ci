# Delete the slave in order to make it disposable. If another job needs to run
# on a slave with the same label OpenStack Jenkins plugin will provision a new
# one using the template as the base image.
#
# Deleting the slave must be the last post-build step on a job, since the slave
# will be marked to be removed by the OpenStack plugin. If this is not the last
# post-build step then it will fail the job because the slave running it will
# be gone after this step.
- publisher:
    name: mark-node-offline
    publishers:
        - groovy-postbuild:
            script: |
                manager.build.getBuiltOn().toComputer().deleteSlave()
